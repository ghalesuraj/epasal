(()=>{"use strict";!function(i,n,e){var a=function(i){return i.preventDefault()},o=function(n){var e=this,a=i(n),o=0;e.init=function(){a.on("click",".is-mega",(function(){e.flush(i(this)),e.depends()})),a.on("mouseup",".menu-item-bar",(function(){clearTimeout(o),o=setTimeout((function(){e.depends()}),50)})),a.on("change",".is-width",(function(){var n=i(this),e=n.val(),a=n.closest(".springoo-mega-menu");a.find(".mega-depend-width").toggleClass("hidden","custom"!==e),a.find(".mega-depend-position").toggleClass("hidden","full"===e)})),i(".is-width").trigger("change"),e.depends()},e.depends=function(){a.find(".is-mega").each((function(){e.flush(i(this))})),i("li",a).removeClass("active-mega-column").removeClass("active-sub-mega-column");var n=i(".active-mega-menu",a).nextUntil(".menu-item-depth-0","li");n.closest("li.menu-item-depth-1").addClass("active-mega-column"),n.closest("li:not(.menu-item-depth-1)").addClass("active-sub-mega-column")},e.flush=function(i){var n=i.is(":checked"),e=i.closest("li");e.toggleClass("active-mega-menu",n),e.find(".field-mega-width").toggleClass("hidden",!n)},e.init()};i.fn.springooMegamenu=function(){return this.each((function(){new o(this)}))},i(e).ready((function(){var o,t,s,c,d,l,u,r,h,g,f,m,p;i("#menu-to-edit").springooMegamenu(),l=i("#icon-dialog"),u=i("#icon-overlay"),r=l.find("#icon-insert"),h=l.find("#icon-load"),g=l.find("#icon-search"),f=i(n).height()<500?parseInt(i(n).height()):500,m=!1,p=!1,l.dialog({dialogClass:"wp-dialog springoo-icon-dialog",width:1e3,height:f,closeOnEscape:!0,autoOpen:!1,create:function(){i(".ui-dialog-titlebar-close").addClass("ui-button")},open:function(){h.height(f-210),u.show()},close:function(){m=!1,u.hide()},resize:function(i,n){h.height(parseInt(n.size.height)-210)}}),i(e).on("click",".pick-icon[data-name]",(function(n){a(n);var e=i(this);e.is(".active-icon")?(e.removeClass("active-icon"),m=!1):(e.addClass("active-icon").siblings().removeClass("active-icon"),m=e.data("name"))})),g.keyup((function(){if(p){d||(d=h.find("a"));var n=i(this).val();if(n){var e=new RegExp(n,"i");d.each((function(){var n=i(this);n.data("name").search(e)<0?n.hide():n.show()}))}else d.show()}})),r.click((function(i){if(a(i),p&&m){var n=c.data("label").replace("%s",m.replace("ti-","").replace("-"," "));c.removeClass("hidden"),c.html('<span class="springoo-icon '.concat(m,'" aria-label="').concat(n,'"></span>')),c.next(".springoo-icon-add").data("icon",m),s.val(m).trigger("keyup"),o.removeClass("hidden"),l.dialog("close")}})),i(e.body).on("click",".springoo-icon-add",(function(n){a(n),t=i(this).parent(),c=t.find(".icon-preview"),o=t.find(".springoo-icon-remove"),s=t.find(".icon-value"),l.dialog("open"),!1===p?i.ajax({type:"POST",url:ajaxurl,data:{action:"springoo-icons"},success:function(n){h.html(n),h.find('[data-name="'+i(this).data("icon")+'"]').addClass("active-icon"),p=!0}}):(h.find("a").removeClass("active-icon"),h.find('[data-name="'+i(this).data("icon")+'"]').addClass("active-icon"))})),i(e.body).on("click",".springoo-icon-remove",(function(n){a(n);var e=i(this),o=e.parent();o.find(".icon-preview").empty().addClass("hidden"),o.find(".springoo-icon-add").data("icon",""),o.find(".icon-value").val(""),e.addClass("hidden")})),u.click((function(i){a(i),u.hide(),l.dialog("close")}))}))}(jQuery,window,document)})();